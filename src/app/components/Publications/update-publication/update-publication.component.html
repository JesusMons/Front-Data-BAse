<p-card class="w-full shadow-lg border-none rounded-lg bg-white">
    <ng-template pTemplate="header">
      <h3 class="text-xl font-semibold text-gray-800 p-4">Actualizar Publicación</h3>
    </ng-template>
  
    <div class="p-4">
      <form [formGroup]="form" novalidate (ngSubmit)="onSubmit()" class="p-fluid">
        <!-- Título -->
        <div class="grid mb-4">
          <div class="col-12">
            <div class="p-inputgroup">
              <span class="p-inputgroup-addon">
                <i class="pi pi-book"></i>
              </span>
              <input
                type="text"
                pInputText
                formControlName="titulo"
                placeholder="Título de la Publicación"
                title="Título de la Publicación"
                class="w-full p-inputtext-lg border-2 rounded-md focus:border-blue-500 focus:ring-0 transition duration-200 ease-in-out p-2"
              />
            </div>
            <div *ngIf="form.get('titulo')?.invalid && (form.get('titulo')?.dirty || form.get('titulo')?.touched)">
              <small class="p-error">El título es requerido.</small>
            </div>
          </div>
        </div>
  
        <!-- Resumen -->
        <div class="grid mb-4">
          <div class="col-12">
            <div class="p-inputgroup">
              <span class="p-inputgroup-addon">
                <i class="pi pi-align-left"></i>
              </span>
              <textarea
                pInputTextarea
                formControlName="resumen"
                placeholder="Resumen"
                rows="5"
                class="w-full border-2 rounded-md focus:border-blue-500 focus:ring-0 transition duration-200 ease-in-out p-2"
              ></textarea>
            </div>
            <div *ngIf="form.get('resumen')?.invalid && (form.get('resumen')?.dirty || form.get('resumen')?.touched)">
              <small class="p-error">El resumen es requerido.</small>
            </div>
          </div>
        </div>
  
        <!-- Fecha de Publicación -->
        <div class="grid mb-4">
          <div class="col-12">
            <div class="p-inputgroup">
              <span class="p-inputgroup-addon">
                <i class="pi pi-calendar"></i>
              </span>
              <input
                type="date"
                pInputText
                formControlName="fecha_publicacion"
                placeholder="Fecha de Publicación"
                class="w-full p-inputtext-lg border-2 rounded-md focus:border-blue-500 focus:ring-0 transition duration-200 ease-in-out p-2"
              />
            </div>
            <div *ngIf="form.get('fecha_publicacion')?.invalid && (form.get('fecha_publicacion')?.dirty || form.get('fecha_publicacion')?.touched)">
              <small class="p-error">La fecha de publicación es requerida.</small>
            </div>
          </div>
        </div>
  
        <!-- Archivo PDF -->
        <div class="grid mb-4">
          <div class="col-12">
            <div class="p-inputgroup">
              <span class="p-inputgroup-addon">
                <i class="pi pi-file-pdf"></i>
              </span>
              <input
                type="file"
                formControlName="archivo_pdf"
                accept="application/pdf"
                class="w-full p-inputtext-lg border-2 rounded-md focus:border-blue-500 focus:ring-0 transition duration-200 ease-in-out p-2"
              />
            </div>
          </div>
        </div>
  
        <!-- Palabras Claves -->
        <div class="grid mb-4">
          <div class="col-12">
            <div *ngFor="let control of palabrasClaves.controls; let i = index">
              <div class="field-checkbox">
                <p-checkbox 
                  [formControl]="getFormControl(i)"
                  binary="true"
                  [label]="allKeywords[i]?.palabra">
                </p-checkbox>
              </div>
            </div>
          </div>
        </div>
  
        <!-- Tipo de Publicación -->
        <div class="grid mb-4">
          <div class="col-12">
            <p-dropdown
              [options]="allPublicationTypes"
              formControlName="tipos_publicacion"
              placeholder="Seleccione el Tipo de Publicación"
              optionLabel="nombre_tipo"
              [filter]="true"
              class="w-full">
            </p-dropdown>
            <div *ngIf="form.get('tipos_publicacion')?.invalid && (form.get('tipos_publicacion')?.dirty || form.get('tipos_publicacion')?.touched)">
              <small class="p-error">El tipo de publicación es requerido.</small>
            </div>
          </div>
        </div>
  
        <!-- Grupo de Investigación -->
        <div class="grid mb-4">
          <div class="col-12">
            <p-dropdown
              [options]="allInvestigationGroups"
              formControlName="grupo_investigacion"
              placeholder="Seleccione el Grupo de Investigación"
              optionLabel="nombre_grupo"
              [filter]="true"
              class="w-full">
            </p-dropdown>
            <div *ngIf="form.get('grupo_investigacion')?.invalid && (form.get('grupo_investigacion')?.dirty || form.get('grupo_investigacion')?.touched)">
              <small class="p-error">El grupo de investigación es requerido.</small>
            </div>
          </div>
        </div>
  
        <!-- Usuario -->
        <div class="grid mb-4">
          <div class="col-12">
            <p-dropdown
              [options]="allUsers"
              formControlName="usuario"
              placeholder="Seleccione el Usuario"
              optionLabel="name"
              [filter]="true"
              class="w-full">
            </p-dropdown>
            <div *ngIf="form.get('usuario')?.invalid && (form.get('usuario')?.dirty || form.get('usuario')?.touched)">
              <small class="p-error">El usuario es requerido.</small>
            </div>
          </div>
        </div>
  
        <!-- Botones -->
        <div class="flex justify-content-center flex-wrap">
          <button 
            pButton 
            pRipple
            label="Guardar"
            icon="pi pi-save"
            severity="info"
            class="mr-2 p-button-raised transition-transform duration-200 ease-in-out hover:scale-105 w-full md:w-auto"
            type="submit"
          ></button>
  
          <button 
            pButton 
            pRipple
            label="Cancelar"
            icon="pi pi-times-circle"
            severity="warning"
            class="p-button-outlined transition-transform duration-200 ease-in-out hover:scale-105 w-full md:w-auto"
            type="button"
            (click)="cancel()"
          ></button>
        </div>
      </form>
    </div>
  
    <ng-template pTemplate="footer">
      <div class="p-4 text-center text-gray-500 text-sm">
        * Complete el formulario para actualizar la publicación.
      </div>
    </ng-template>
  </p-card>
  